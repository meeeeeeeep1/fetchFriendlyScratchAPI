
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scratch API Proxy</title>
  <script>
  // Set the Content-Type header to application/json
  document.addEventListener('DOMContentLoaded', function() {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', location.href);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send();
  });
</script>

</head>
<body>
  <pre id="json-data"></pre>

  <script>
    // Get the current URL
var url = window.location.href;

// Extract the username from the URL
var username = url.split('/').pop();

console.log(username);
    // Function to make the API request
    function fetchData() {
         // Get the current URL
var url = window.location.href;

// Extract the username from the URL
var username = url.split('/').pop();

      const apiUrl = `https://corsproxy.io/?https%3A%2F%2Fapi.scratch.mit.edu%2Fusers%2F` + username + `%2F`; // Replace with your API URL

      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          // Convert the JSON data to a formatted string
          const formattedData = JSON.stringify(data, null, 2);

          // Display the formatted JSON data in the <pre> element
          document.getElementById('json-data').textContent = formattedData;
        })
        .catch(error => {
          // Handle any errors
          console.error('Error:', error);
        });
    }

    // Call the fetchData function to retrieve data
    fetchData();
  </script>
</body>
</html>
